<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}Login{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
      
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.9.0/fullcalendar.js"></script>
  <style>
    /* Styling for the header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: darkred;
      color: #fff;
      padding: 30px;
      font-size: 24px;
    }
    .flogo{


      width: 30px;
      height: 30px;
    }
    .ilogo{

width: 30px;
height: 30px;
}

.tlogo{


width: 30px;
height: 30px;
}

.ylogo{


width: 30px;
height: 30px;
}
    
    header a {
      color: #fff;
      text-decoration: none;
      margin-right: 20px;
    }
    
    header a:hover {
      text-decoration: underline;
    }
    
    header button {
      background-color: #fff;
      color: #333;
      border: none;
      border-radius: 5px;
      padding: 10px 20px;
      font-weight: bold;
      cursor: pointer;
    }
    
    header button:hover {
      background-color: #ddd;
    }
    
    /* Styling for the logo */
    #logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 28px;
      font-weight: bold;
      margin-right: 20px;
    }
    
    #logo img {
      width: 60px;
      height: 60px;
      margin-right: 10px;
    }
    
    /* Styling for the footer */
    footer {
      background-color: darkred;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      font-size: 18px;
      position: fixed;
      bottom: 0;
      width: 100%;
    }
    
    footer p {
      margin: 0;
    }
  </style>
</head>
<body>
  <header>
    <div id="logo">
      {% load static %}
      <img src="{% static 'logo.jpg' %}" alt="Logo Image">
      <span>Baskenta</span>
    </div>
    <div>
      <a href="{% url 'aboutus' %}">About Us</a>
      <a href="{% url 'home' %}">Home</a>
      <a href="{% url 'communication' %}">Communication</a>
      <a href="{% url 'schedule' %}">Schedule</a>
      <a href="{% url 'performance' %}">Performance</a>
      <a href="{% url 'management' %}">Management</a>
      
    </div>
    <div>
      {% if user.is_authenticated %}
        <a href="{% url 'myuser' %}">{{user.get_username}}</a>
        <p style="display:inline;"> | </p>
        <a href="{% url 'logout' %}">Logout</a>
      {% else %}
        <button onclick="location.href='{% url 'login' %}'">Login</button>
      {% endif %}
    </div>
  </header>
  
  <hr>
  
  {% block content %}
  {% endblock %}
  
  <footer>
    <p>&copy; 2023 Baskenta. All rights reserved.</p>
    <span style="margin-right: 300px;"></span>
    <div>

      <a href="#">Contact Us</a>
      <span style="margin-right: 100px;"></span>

      <a href="#">Terms of Service</a>
      <span style="margin-right: 100px;"></span>

      <a href="#">Privacy Policy</a>
      <span style="margin-right: 100px;"></span>

      <a href="#"><img src="../static/flogo.png" class="flogo" alt="Facebook"></a>
      <span style="margin-right: 100px;"></span>  

      <a href="#"><img src="../static/ilogo.png" class = "ilogo" alt="Instagram"></a>
      <span style="margin-right: 100px;"></span>  

      <a href="#"><img src="../static/tlogo.png" class="tlogo" alt="Twitter"></a>
      <span style="margin-right: 100px;"></span>  

      <a href="#"><img src="../static/ylogo.jpeg" class="ylogo" alt="Youtube"></a>
    </div>
  </footer>

  <script>
    $(document).ready(function () {

      var userType = "{{ user.profile.usertype }}";
        var calendar = $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            events: '/all_events',
            selectable: (userType == "Manager" || userType == "Coach"),
            selectHelper: true,
            editable: (userType == "Manager" || userType == "Coach"),
            eventLimit: true,
            select: function (start, end, allDay) {
              
    var title = prompt("Enter Event Title");
    var description = prompt("Enter Event Description"); // Add prompt for description
    if (title && description) { // Check if title and description are provided
        var start = $.fullCalendar.formatDate(start, "Y-MM-DD HH:mm:ss");
        var end = $.fullCalendar.formatDate(end, "Y-MM-DD HH:mm:ss");
        $.ajax({
            type: "GET",
            url: '/add_event',
            data: {'title': title, 'description': description, 'start': start, 'end': end}, // Include description in data
            dataType: "json",
            success: function (data) {
                calendar.fullCalendar('refetchEvents');
                alert("Added Successfully");
            },
            error: function (data) {
                alert('There is a problem!!!');
            }
        });
    }
},

            eventResize: function (event) {
                var start = $.fullCalendar.formatDate(event.start, "Y-MM-DD HH:mm:ss");
                var end = $.fullCalendar.formatDate(event.end, "Y-MM-DD HH:mm:ss");
                var title = event.title;
                var id = event.id;
                $.ajax({
                    type: "GET",
                    url: '/update',
                    data: {'title': title, 'start': start, 'end': end, 'id': id},
                    dataType: "json",
                    success: function (data) {
                        calendar.fullCalendar('refetchEvents');
                        alert('Event Update');
                    },
                    error: function (data) {
                        alert('There is a problem!!!');
                    }
                });
            },
  
            eventDrop: function (event) {
                var start = $.fullCalendar.formatDate(event.start, "Y-MM-DD HH:mm:ss");
                var end = $.fullCalendar.formatDate(event.end, "Y-MM-DD HH:mm:ss");
                var title = event.title;
                var id = event.id;
                $.ajax({
                    type: "GET",
                    url: '/update',
                    data: {'title': title, 'start': start, 'end': end, 'id': id},
                    dataType: "json",
                    success: function (data) {
                        calendar.fullCalendar('refetchEvents');
                        alert('Event Update');
                    },
                    error: function (data) {
                        alert('There is a problem!!!');
                    }
                });
            },
  
            eventClick: function (event) {
                if ((userType =="Coach" || userType == "Manager") && confirm("Are you sure you want to remove it?")) {
                    var id = event.id;
                    $.ajax({
                        type: "GET",
                        url: '/remove',
                        data: {'id': id},
                        dataType: "json",
                        success: function (data) {
                            calendar.fullCalendar('refetchEvents');
                            alert('Event Removed');
                        },
                        error: function (data) {
                            alert('There is a problem!!!');
                        }
                    });
                }
            },
  
        });
    });
 
 </script>
</body>
</html>
